import{_ as w,d as S,b as c,c as d,h as j,t as x,e as o,F as D,j as F,k as R,s as U,l as C,r as y,m as z,p as A,i as V,q as G,x as v,y as E,f as N,u as L,w as M,v as q,z as W,g as H,n as I}from"./entry-cf55a5cd.mjs";const J=S({name:"Select",props:{selected:String,list:Array,label:String},emits:["update:selected"],setup(f,{expose:s}){s();const l={};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),K=["for"],Q=["id","value","name"],X=o("option",{value:"all"},"All",-1),Y=["value","selected"];function Z(f,s,l,e,a,p){return c(),d("label",{class:"text-gray-700 flex flex-col",for:l.label},[j(x(l.label)+" ",1),o("select",{id:l.label,class:"md:w-52 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:l.selected,onChange:s[0]||(s[0]=r=>f.$emit("update:selected",r.target.value)),name:l.label},[X,(c(!0),d(D,null,F(l.list,r=>(c(),d("option",{value:r,selected:r===l.selected},x(r),9,Y))),256))],40,Q)],8,K)}var $=w(J,[["render",Z]]);const ee=S({name:"Results",setup(f,{expose:s}){s();const l=R(),{occupations:e,divisions:a,dates:p,ceDates:r,glyphs:t}=U(l),i=C({division:"all",document:"all",book:"all",occupation:"all",send:"all",date:"all",ce_date:"all"}),h=y("false"),n=C({}),m=z(()=>t.value.filter(u=>{for(let g in n)if(u.source[g]===void 0||u.source[g]!=n[g])return!1;return!0}));A(i,(u,g)=>{for(var _ in i)i[_]==="all"?delete n[_]:n[_]=i[_]});const b={glyphStore:l,occupations:e,divisions:a,dates:p,ceDates:r,glyphs:t,selected:i,ifShowFilter:h,filter:n,filterdResults:m};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),te={class:"container mx-auto flex flex-col"},se={class:"self-end items-end p-1 md:hidden"},le={class:"relative inline-block w-10 mr-2 align-middle select-none"},oe=o("label",{for:"toggle",class:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),re=o("span",{class:"text-gray-400 font-medium"}," Filter ",-1),ae={class:"relative flex py-1 sm:py-5 items-center"},ne=o("div",{class:"flex-grow border-t border-gray-400"},null,-1),ce={class:"flex-shrink mx-4 text-gray-400"},ie=o("div",{class:"flex-grow border-t border-gray-400"},null,-1),de={key:0,class:"grid grid-cols-3 md:grid-cols-6 lg:grid-cols-12"},ue={class:"rounded-sm shadow-lg flex flex-col sm:p-1 bg-white border hover:border-blue-300 hover:border-2"},_e=["href"],fe=["src"],pe={class:"leading-normal text-gray-100 text-center bg-blue-500 opacity-30"};function he(f,s,l,e,a,p){const r=$;return c(),d("section",te,[o("div",se,[o("div",le,[V(o("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":s[0]||(s[0]=t=>e.ifShowFilter=t),"true-value":"true","false-value":"false",class:"checked:bg-blue-500 outline-none focus:outline-none right-4 checked:right-0 duration-200 ease-in absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,512),[[G,e.ifShowFilter]]),oe]),re]),o("div",{class:E([{hidden:e.ifShowFilter==="false"},"md:flex flex-col md:flex-row justify-center gap-1"])},[v(r,{label:"Division",list:e.divisions,selected:e.selected.division,"onUpdate:selected":s[1]||(s[1]=t=>e.selected.division=t)},null,8,["list","selected"]),v(r,{label:"Occupation",list:e.occupations,selected:e.selected.occupation,"onUpdate:selected":s[2]||(s[2]=t=>e.selected.occupation=t)},null,8,["list","selected"]),v(r,{label:"Date",list:e.dates,selected:e.selected.date,"onUpdate:selected":s[3]||(s[3]=t=>e.selected.date=t)},null,8,["list","selected"]),v(r,{label:"Date",list:e.ceDates,selected:e.selected.ce_date,"onUpdate:selected":s[4]||(s[4]=t=>e.selected.ce_date=t)},null,8,["list","selected"])],2),o("div",ae,[ne,o("span",ce,"Glyphs: "+x(e.filterdResults.length),1),ie]),e.glyphs.length>0?(c(),d("div",de,[(c(!0),d(D,null,F(e.filterdResults,t=>(c(),d("div",ue,[o("a",{href:"/glyph/"+t.id,class:"cursor-pointer flex flex-col h-full justify-between",target:"blank"},[o("img",{src:t.thumbnail_url,alt:"",loading:"lazy",class:"w-full items-center justify-start"},null,8,fe),o("p",pe,x(t.id),1)],8,_e)]))),256))])):N("",!0)])}var ge=w(ee,[["render",he]]);const me=S({name:"[character]",async setup(f,{expose:s}){s();let l,e;const a=R(),{glyphs:p}=U(a);a.clear();const r=L(),t=r.params.character;let i=0,h=1;const n=y(!1),m=y(t),b=y([]);t&&(n.value=!0,[l,e]=M(()=>u()),await l,e());async function u(){const B=`https://clioapi.hi.u-tokyo.ac.jp/shipsapi/v1/W34/character/${t}?delegate=${i}&position=${h}`,{data:k}=await H(B),O=k.value.list,P=k.value.search_results;O.forEach(T=>a.addGlyph(T)),P<100?(h=1,n.value=!1):(h+=100,u())}function g(){return I({path:`/search/${m.value}`})}const _={glyphStore:a,glyphs:p,route:r,character:t,delegate:i,position:h,isPending:n,inputCharacter:m,results:b,search:u,move:g};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),be={class:""},ve={class:"flex flex-row p-1 md:py-10 md:px-20 items-center justify-center gap-1 md:gap-4"},ye=j("a ");function xe(f,s,l,e,a,p){const r=ge;return c(),d("div",be,[o("div",ve,[V(o("input",{type:"text",placeholder:"\u691C\u7D22","onUpdate:modelValue":s[0]||(s[0]=t=>e.inputCharacter=t),class:"border-transparent appearance-none border border-gray-300 py-2 px-4 w-2/3 md:w-1/5 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[q,e.inputCharacter]]),o("button",{type:"button",onClick:e.move,class:"w-1/3 md:w-1/12 text-white bg-blue-500 rounded px-4 py-2 hover:bg-white hover:text-black duration-300"},"Search")]),e.glyphs?(c(),W(r,{key:0})):N("",!0),ye])}var Se=w(me,[["render",xe]]);export{Se as default};
