import{G as P,I as w,M as l,O as n,S as x,P as D,Q as d,K as f}from"./entry-5e54c123.mjs";import{v as C}from"./chunk-O2ZSDYKA-84508be3.mjs";import{n as _}from"./chunk-IRDJNOQF-a1b149c5.mjs";import"./chunk-VVWTEMUP-45a42d45.mjs";import{Y as L,Z as y,t as I,X as S,e as A,n as R,a as T}from"./chunk-P2U3GQ3L-ae62dc84.mjs";import{G as k}from"./IIIFContentHandler-2D2CUZM6-df4ed86b.mjs";var O=P(k()),h=w(),M=class extends A{constructor(e){super(e)}create(){this.setConfig("fileLinkCenterPanel"),super.create(),this.extensionHost.subscribe(n.OPEN_EXTERNAL_RESOURCE,e=>{this.openMedia(e)}),this.$scroll=h('<div class="scroll"></div>'),this.$content.append(this.$scroll),this.$downloadItems=h("<ol></ol>"),this.$scroll.append(this.$downloadItems),this.$downloadItemTemplate=h('<li><img/><div class="col2"><a class="filename" target="_blank" download=""></a><span class="label"></span><a class="description" target="_blank" download=""></a></div></li>'),this.title=this.extension.helper.getLabel()}async openMedia(e){await this.extension.getExternalResources(e);let s=this.extension.helper.getCurrentCanvas().getContent(),t;for(let a=0;a<s.length;a++){let o=s[a];if(!o.getBody().length)continue;t=this.$downloadItemTemplate.clone();let p=t.find(".filename"),v=t.find(".label"),c=t.find("img"),u=t.find(".description"),r=o.getBody()[0],i=r.getProperty("id");i&&(p.prop("href",i),p.text(i.substr(i.lastIndexOf("/")+1)));let g=O.LanguageMap.getValue(r.getLabel());g&&v.text(d(g));let m=o.getProperty("thumbnail");m?c.prop("src",m):c.hide();let b=r.getProperty("description");b&&(u.text(d(b)),i&&u.prop("href",i)),this.$downloadItems.append(t)}this.extensionHost.publish(f.EXTERNAL_RESOURCE_OPENED),this.extensionHost.publish(f.LOAD)}resize(){super.resize(),this.title&&this.$title.text(d(this.title)),this.$scroll.height(this.$content.height()-this.$scroll.verticalMargins())}},H=class extends R{constructor(e){super(e)}create(){this.setConfig("settingsDialogue"),super.create()}},F=class extends T{constructor(e){super(e)}create(){this.setConfig("shareDialogue"),super.create()}update(){super.update(),this.code=this.extension.getEmbedScript(this.options.embedTemplate,this.currentWidth,this.currentHeight),this.$code.val(this.code)}resize(){super.resize()}},G={authAPIVersion:1,bookmarkThumbHeight:150,bookmarkThumbWidth:90,dropEnabled:!0,footerPanelEnabled:!0,headerPanelEnabled:!0,leftPanelEnabled:!0,limitLocales:!1,openTemplate:"http://universalviewer.io?manifest={0}",pessimisticAccessControl:!1,rightPanelEnabled:!0,theme:"uv-en-GB-theme"},N={shareDialogue:{options:{embedTemplate:'<iframe src="{0}" width="{1}" height="{2}" allowfullscreen frameborder="0"></iframe>'},content:{customSize:"custom",embed:"Embed",embedInstructions:"To embed this item in your own website, copy and paste the code below.",height:"Height",iiif:"IIIF Manifest",share:"Share",shareInstructions:"To share this item, copy the URL below.",size:"Size:",width:"Width"}},fileLinkCenterPanel:{content:{}},footerPanel:{options:{bookmarkEnabled:!1,downloadEnabled:!1,embedEnabled:!1,feedbackEnabled:!1,minimiseButtons:!0,openEnabled:!1,shareEnabled:!0},content:{bookmark:"Add to bookmarks",download:"Download",embed:"Share",exitFullScreen:"Exit Full Screen",fullScreen:"Full Screen",moreInfo:"More Information",open:"Open"}},genericDialogue:{content:{ok:"OK"}},headerPanel:{content:{close:"Close",help:"Help"}},helpDialogue:{content:{text:"placeholder text",title:"Help"}},moreInfoRightPanel:{options:{canvasDisplayOrder:"",canvasExclude:"",copyToClipboardEnabled:!1,manifestDisplayOrder:"",manifestExclude:"",panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!1,rtlLanguageCodes:"ar, ara, dv, div, he, heb, ur, urd",showAllLanguages:!1,textLimit:4,textLimitType:"lines"},content:{attribution:"Attribution",collapse:"Collapse Information",collapseFull:"Collapse Gallery",description:"Description",expand:"Expand Information",expandFull:"Expand Gallery",holdingText:"Your module goes here!",less:"less",license:"License",logo:"Logo",more:"more",noData:"No data to display",page:"Page",title:"More Information",manifestHeader:"About the item",canvasHeader:"About the image",copyToClipboard:"Copy to clipboard",copiedToClipboard:"Copied to clipboard"}},resourcesLeftPanel:{options:{expandFullEnabled:!1,panelAnimationDuration:250,panelCollapsedWidth:30,panelExpandedWidth:255,panelOpen:!0},content:{title:"Contents"}},dialogue:{content:{close:"Close"}},downloadDialogue:{content:{download:"Download",entireFileAsOriginal:"Entire file",noneAvailable:"No download options are available.",preview:"Preview",title:"Download"}},loginDialogue:{content:{login:"Login",cancel:"Cancel"}},settingsDialogue:{content:{locale:"Locale",pagingEnabled:"Two Page View",preserveViewport:"Preserve Zoom",reducedMotion:"Reduce motion (disables animations)",title:"Settings",website:"<a href='https://github.com/universalviewer/universalviewer'>more info</a>"}}},B={label:"English (GB)",locales:[{name:"cy-GB",label:"Cymraeg"},{name:"en-GB",label:"English (GB)"},{name:"fr-FR",label:"Fran\xE7ais (FR)"},{name:"pl-PL",label:"Polski"},{name:"sv-SE",label:"Svenska"}]},V={authCORSError:"Your browser does not support CORS, please upgrade to view this content.",authorisationFailedMessage:"Your log-in attempt did not appear to be successful. Please try again.",degradedResourceMessage:"Please log in to view at full quality.",degradedResourceLogin:"log in",forbiddenResourceMessage:"Your current access rights are insufficient to view this image",mediaViewer:"Media Viewer",skipToDownload:"Skip to downloads and alternative formats"},E={options:G,modules:N,localisation:B,content:V},q=class extends L{constructor(){super(...arguments),this.defaultConfig=E,this.locales={"en-GB":E,"cy-GB":()=>l(()=>import("./cy-GB-IHBTWEE4-042f68c2.mjs"),["cy-GB-IHBTWEE4-042f68c2.mjs","entry-5e54c123.mjs","entry.20e32d7f.css"]),"fr-FR":()=>l(()=>import("./fr-FR-SX32APTS-9c518163.mjs"),["fr-FR-SX32APTS-9c518163.mjs","entry-5e54c123.mjs","entry.20e32d7f.css"]),"pl-PL":()=>l(()=>import("./pl-PL-6Q4OWJUB-dfcbda3e.mjs"),["pl-PL-6Q4OWJUB-dfcbda3e.mjs","entry-5e54c123.mjs","entry.20e32d7f.css"]),"sv-SE":()=>l(()=>import("./sv-SE-5KIJEH7C-7950034b.mjs"),["sv-SE-5KIJEH7C-7950034b.mjs","entry-5e54c123.mjs","entry.20e32d7f.css"])}}create(){super.create(),this.extensionHost.subscribe(n.CANVAS_INDEX_CHANGE,e=>{this.viewCanvas(e)}),this.extensionHost.subscribe(n.THUMB_SELECTED,e=>{this.extensionHost.publish(n.CANVAS_INDEX_CHANGE,e)})}createModules(){super.createModules(),this.isHeaderPanelEnabled()?this.headerPanel=new y(this.shell.$headerPanel):this.shell.$headerPanel.hide(),this.isLeftPanelEnabled()&&(this.leftPanel=new C(this.shell.$leftPanel)),this.centerPanel=new M(this.shell.$centerPanel),this.isRightPanelEnabled()&&(this.rightPanel=new I(this.shell.$rightPanel)),this.isFooterPanelEnabled()?this.footerPanel=new S(this.shell.$footerPanel):this.shell.$footerPanel.hide(),this.$helpDialogue=$('<div class="overlay help" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$helpDialogue),this.helpDialogue=new _(this.$helpDialogue),this.$shareDialogue=$('<div class="overlay share" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$shareDialogue),this.shareDialogue=new F(this.$shareDialogue),this.$settingsDialogue=$('<div class="overlay settings" aria-hidden="true"></div>'),this.shell.$overlays.append(this.$settingsDialogue),this.settingsDialogue=new H(this.$settingsDialogue),this.isLeftPanelEnabled()&&this.leftPanel.init(),this.isRightPanelEnabled()&&this.rightPanel.init()}render(){super.render()}isLeftPanelEnabled(){return x.getBool(this.data.config.options.leftPanelEnabled,!0)&&(this.helper.isMultiCanvas()||this.helper.isMultiSequence()||this.helper.hasResources())}getEmbedScript(e,s,t){let a=`${this.getAppUri()}#?manifest=${this.helper.manifestUri}&c=${this.helper.collectionIndex}&m=${this.helper.manifestIndex}&cv=${this.helper.canvasIndex}`;return D.format(e,a,s.toString(),t.toString())}};export{q as default};
