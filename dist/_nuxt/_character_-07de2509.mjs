import{_ as w,d as S,b as i,c as d,h as P,t as y,e as o,F as j,j as D,k as F,s as R,l as C,m as T,p as z,i as U,q as G,x as v,y as K,f as V,u as M,r as x,w as E,v as L,z as q,A as W,B as H,g as I,n as J}from"./entry-5e54c123.mjs";const Q=S({name:"Select",props:{selected:String,list:Array,label:String},emits:["update:selected"],setup(f,{expose:s}){s();const l={};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),X=["for"],Y=["id","value","name"],Z=o("option",{value:"all"},"All",-1),$=["value","selected"];function ee(f,s,l,e,n,p){return i(),d("label",{class:"text-gray-700 flex flex-col",for:l.label},[P(y(l.label)+" ",1),o("select",{id:l.label,class:"md:w-52 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:l.selected,onChange:s[0]||(s[0]=r=>f.$emit("update:selected",r.target.value)),name:l.label},[Z,(i(!0),d(j,null,D(l.list,r=>(i(),d("option",{value:r,selected:r===l.selected},y(r),9,$))),256))],40,Y)],8,X)}var te=w(Q,[["render",ee]]);const se=S({name:"Results",setup(f,{expose:s}){s();const l=F(),{occupations:e,divisions:n,dates:p,ceDates:r,glyphs:t,ifShowFilter:g}=R(l),a=C({division:"all",document:"all",book:"all",occupation:"all",send:"all",date:"all",ce_date:"all"}),c=C({}),m=T(()=>t.value.filter(u=>{for(let h in c)if(u.source[h]===void 0||u.source[h]!=c[h])return!1;return!0}));z(a,(u,h)=>{for(var _ in a)a[_]==="all"?delete c[_]:c[_]=a[_]});const b={glyphStore:l,occupations:e,divisions:n,dates:p,ceDates:r,glyphs:t,ifShowFilter:g,selected:a,filter:c,filterdResults:m};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),le={class:"container mx-auto flex flex-col"},oe={class:"self-end items-end p-1 md:hidden"},re={class:"relative inline-block w-10 mr-2 align-middle select-none"},ae=o("label",{for:"toggle",class:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1),ne=o("span",{class:"text-gray-400 font-medium"}," Filter ",-1),ce={class:"relative flex py-1 sm:py-5 items-center"},ie=o("div",{class:"flex-grow border-t border-gray-400"},null,-1),de={class:"flex-shrink mx-4 text-gray-400"},ue=o("div",{class:"flex-grow border-t border-gray-400"},null,-1),_e={key:0,class:"grid grid-cols-3 md:grid-cols-6 lg:grid-cols-12"},fe={class:"rounded-sm shadow-lg flex flex-col sm:p-1 bg-white border hover:border-blue-300 hover:border-2"},pe=["href"],he=["src"],ge={class:"leading-normal text-gray-100 text-center bg-blue-500 opacity-30"};function me(f,s,l,e,n,p){const r=te;return i(),d("section",le,[o("div",oe,[o("div",re,[U(o("input",{type:"checkbox",name:"toggle",id:"toggle","onUpdate:modelValue":s[0]||(s[0]=t=>e.ifShowFilter=t),"true-value":"true","false-value":"false",class:"checked:bg-blue-500 outline-none focus:outline-none right-4 checked:right-0 duration-200 ease-in absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,512),[[G,e.ifShowFilter]]),ae]),ne]),o("div",{class:K([{hidden:e.ifShowFilter==="false"},"md:flex flex-col md:flex-row justify-center gap-1"])},[v(r,{label:"Division",list:e.divisions,selected:e.selected.division,"onUpdate:selected":s[1]||(s[1]=t=>e.selected.division=t)},null,8,["list","selected"]),v(r,{label:"Occupation",list:e.occupations,selected:e.selected.occupation,"onUpdate:selected":s[2]||(s[2]=t=>e.selected.occupation=t)},null,8,["list","selected"]),v(r,{label:"Date",list:e.dates,selected:e.selected.date,"onUpdate:selected":s[3]||(s[3]=t=>e.selected.date=t)},null,8,["list","selected"]),v(r,{label:"Date",list:e.ceDates,selected:e.selected.ce_date,"onUpdate:selected":s[4]||(s[4]=t=>e.selected.ce_date=t)},null,8,["list","selected"])],2),o("div",ce,[ie,o("span",de,"Glyphs: "+y(e.filterdResults.length),1),ue]),e.glyphs.length>0?(i(),d("div",_e,[(i(!0),d(j,null,D(e.filterdResults,t=>(i(),d("div",fe,[o("a",{href:"/glyph/"+t.id,class:"cursor-pointer flex flex-col h-full justify-between",target:"blank"},[o("img",{src:t.thumbnail_url,alt:"",loading:"lazy",class:"w-full items-center justify-start"},null,8,he),o("p",ge,y(t.id),1)],8,pe)]))),256))])):V("",!0)])}var be=w(se,[["render",me]]);const ve=S({name:"[character]",async setup(f,{expose:s}){s();let l,e;const n=F(),{glyphs:p}=R(n);n.clear();const r=M(),t=r.params.character;let g=0,a=1;const c=x(!1),m=x(t),b=x([]);t&&(c.value=!0,[l,e]=E(()=>u()),await l,e());async function u(){const B=`https://clioapi.hi.u-tokyo.ac.jp/shipsapi/v1/W34/character/${t}?delegate=${g}&position=${a}`,{data:k}=await I(B),N=k.value.list,A=k.value.search_results;N.forEach(O=>n.addGlyph(O)),A<100?(a=1,c.value=!1):(a+=100,u())}function h(){return J({path:`/search/${m.value}`})}const _={glyphStore:n,glyphs:p,route:r,character:t,delegate:g,position:a,isPending:c,inputCharacter:m,results:b,search:u,move:h};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),ye={class:""},xe={class:"flex flex-row p-1 md:py-10 md:px-20 items-center justify-center gap-1 md:gap-4"},we=["onKeyup"];function Se(f,s,l,e,n,p){const r=be;return i(),d("div",ye,[o("div",xe,[U(o("input",{type:"text",placeholder:"\u691C\u7D22","onUpdate:modelValue":s[0]||(s[0]=t=>e.inputCharacter=t),onKeyup:q(W(e.move,["prevent"]),["enter"]),class:"border-transparent appearance-none border border-gray-300 py-2 px-4 w-2/3 md:w-1/5 bg-white rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,we),[[L,e.inputCharacter]]),o("button",{type:"button",onClick:e.move,class:"w-1/3 md:w-1/12 text-white bg-blue-500 rounded px-4 py-2 hover:bg-white hover:text-black duration-300"},"Search")]),e.glyphs?(i(),H(r,{key:0})):V("",!0)])}var Ce=w(ve,[["render",Se]]);export{Ce as default};
